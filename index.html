<!DOCTYPE html>
<html lang="en">
<head>
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <script type="text/javascript" src="https://api.map.baidu.com/api?v=2.0&ak=E4805d16520de693a3fe707cdc962045"></script>
    <script type="text/javascript" src="https://api.map.baidu.com/library/Heatmap/2.0/src/Heatmap_min.js"></script>
    <title>太白湖新区人口分布热力图</title>
    <style type="text/css">
		ul,li{list-style: none;margin:0;padding:0;float:left;}
		html{height:100%}
		body{height:100%;margin:0px;padding:0px;font-family:"微软雅黑";}
		#container{height:100%;width:100%;}
		#r-result{width:100%;}
    </style>
</head>
<body>
	<div id="container"></div>
	<div id="r-result" style="display:none">
		<input type="button"  οnclick="openHeatmap();" value="显示热力图"/><input type="button"  οnclick="closeHeatmap();" value="关闭热力图"/>
	</div>
</body>
</html>
<script type="text/javascript">
    var map = new BMap.Map("container");          // 创建地图实例
 
    var point = new BMap.Point(116.603397,35.36612);
    map.centerAndZoom(point, 16);             // 初始化地图，设置中心点坐标和地图级别
	map.setCurrentCity("济宁");		//设置当前显示城市
    map.enableScrollWheelZoom(); // 允许滚轮缩放
 
	
	
    var points =[
 
{"lng":116.622308,"lat":35.376229,"count":4137},
{"lng":116.615736,"lat":35.372491,"count":1828},
{"lng":116.618427,"lat":35.372647,"count":4147},
{"lng":116.622295,"lat":35.372894,"count":3826},
{"lng":116.618882,"lat":35.380001,"count":3937},
{"lng":116.619527,"lat":35.366833,"count":3601},
{"lng":116.614505,"lat":35.38274,"count":2247},
{"lng":116.621828,"lat":35.368216,"count":917},
{"lng":116.612835,"lat":35.38127,"count":816},
{"lng":116.619352,"lat":35.369416,"count":143},
{"lng":116.608511,"lat":35.364375,"count":4791},
{"lng":116.607411,"lat":35.367575,"count":1778},
{"lng":116.611511,"lat":35.365075,"count":1441},
{"lng":116.612211,"lat":35.363975,"count":1013},
{"lng":116.608211,"lat":35.395775,"count":2716},
{"lng":116.607611,"lat":35.391475,"count":1351},
{"lng":116.603811,"lat":35.392075,"count":208},
{"lng":116.605411,"lat":35.393475,"count":135},
{"lng":116.609611,"lat":35.390875,"count":417},
{"lng":116.604411,"lat":35.387375,"count":87},
{"lng":116.605511,"lat":35.389375,"count":569},
{"lng":116.590872,"lat":35.355958,"count":7291},
{"lng":116.577925,"lat":35.355288,"count":6905},
{"lng":116.582199,"lat":35.341433,"count":2190},
{"lng":116.60691,"lat":35.388565,"count":2163},
{"lng":116.589911,"lat":35.353075,"count":2107},
{"lng":116.583614,"lat":35.355883,"count":1569},
{"lng":116.585513,"lat":35.352812,"count":1367},
{"lng":116.587495,"lat":35.351096,"count":1246},
{"lng":116.609417,"lat":35.39415,"count":716},
{"lng":116.606282,"lat":35.394796,"count":469},
{"lng":116.609242,"lat":35.39278,"count":308},
{"lng":116.602103,"lat":35.393023,"count":524},
{"lng":116.589544,"lat":35.351592,"count":123},
{"lng":116.712411,"lat":35.309275,"count":467},
{"lng":116.712611,"lat":35.317375,"count":1962},
{"lng":116.714511,"lat":35.323275,"count":1051},
{"lng":116.710911,"lat":35.321375,"count":385},
{"lng":116.720711,"lat":35.328275,"count":448},
{"lng":116.731411,"lat":35.329275,"count":665},
{"lng":116.733211,"lat":35.327075,"count":489},
{"lng":116.732911,"lat":35.325075,"count":410},
{"lng":116.730111,"lat":35.321075,"count":559},
{"lng":116.727811,"lat":35.317075,"count":1756},
{"lng":116.713811,"lat":35.299875,"count":331},
{"lng":116.718611,"lat":35.297475,"count":655},
{"lng":116.715611,"lat":35.297475,"count":450},
{"lng":116.718911,"lat":35.301175,"count":910},
{"lng":116.715311,"lat":35.294475,"count":772},
{"lng":116.702311,"lat":35.300575,"count":902},
{"lng":116.694011,"lat":35.297275,"count":1292},
{"lng":116.698211,"lat":35.297775,"count":512},
{"lng":116.678311,"lat":35.283175,"count":177},
{"lng":116.693511,"lat":35.290375,"count":599},
{"lng":116.705111,"lat":35.283975,"count":1246},
{"lng":116.703011,"lat":35.283575,"count":837},
{"lng":116.700811,"lat":35.282075,"count":1336},
{"lng":116.680611,"lat":35.267475,"count":4517},
{"lng":116.649711,"lat":35.288975,"count":4171},
{"lng":116.691111,"lat":35.322175,"count":36},
{"lng":116.679311,"lat":35.318575,"count":17},
{"lng":116.677411,"lat":35.328675,"count":844},
{"lng":116.668911,"lat":35.325675,"count":568},
{"lng":116.686911,"lat":35.329975,"count":961},
{"lng":116.689411,"lat":35.345475,"count":991},
{"lng":116.689511,"lat":35.337975,"count":924},
{"lng":116.690211,"lat":35.349575,"count":1811},
{"lng":116.727111,"lat":35.343775,"count":1048},
{"lng":116.727911,"lat":35.341975,"count":242},
{"lng":116.723111,"lat":35.343275,"count":322},
{"lng":116.727411,"lat":35.336375,"count":1898},
{"lng":116.712211,"lat":35.335175,"count":1092},
{"lng":116.711711,"lat":35.345875,"count":2208},
{"lng":116.650311,"lat":35.319275,"count":4},
{"lng":116.701011,"lat":35.357275,"count":1826},
{"lng":116.699611,"lat":35.359975,"count":1901},
{"lng":116.694711,"lat":35.360675,"count":3961},
{"lng":116.694911,"lat":35.358275,"count":1794},
{"lng":116.694411,"lat":35.356275,"count":1414},
{"lng":116.697211,"lat":35.355075,"count":871},
{"lng":116.693411,"lat":35.354475,"count":789},
{"lng":116.696211,"lat":35.352675,"count":910},
{"lng":116.696211,"lat":35.351375,"count":747},
{"lng":116.693711,"lat":35.352175,"count":336},
{"lng":116.696111,"lat":35.349475,"count":2068},
{"lng":116.701211,"lat":35.349275,"count":1126},
{"lng":116.700511,"lat":35.350575,"count":725},
{"lng":116.699911,"lat":35.352875,"count":308},
{"lng":116.606911,"lat":35.382275,"count":182},
{"lng":116.608611,"lat":35.382675,"count":589},
{"lng":116.575111,"lat":35.346475,"count":4},
{"lng":116.581018,"lat":35.367728,"count":2422},
{"lng":116.583511,"lat":35.366075,"count":236},
{"lng":116.588911,"lat":35.367475,"count":721},
{"lng":116.585911,"lat":35.367175,"count":2793},
{"lng":116.592711,"lat":35.375175,"count":22},
{"lng":116.600637,"lat":35.360851,"count":3799},
{"lng":116.591511,"lat":35.367575,"count":633},
{"lng":116.592911,"lat":35.370175,"count":1554},
{"lng":116.580111,"lat":35.375175,"count":6550},
{"lng":116.578973,"lat":35.377726,"count":2891},
{"lng":116.575311,"lat":35.371175,"count":215},
{"lng":116.580111,"lat":35.368675,"count":538},
{"lng":116.572611,"lat":35.360275,"count":13},
{"lng":116.596211,"lat":35.373875,"count":5953},
{"lng":116.596511,"lat":35.384575,"count":1371},
{"lng":116.601611,"lat":35.377475,"count":138},
{"lng":116.595211,"lat":35.374775,"count":1992},
{"lng":116.588331,"lat":35.385475,"count":1592},
{"lng":116.591811,"lat":35.382575,"count":83},
{"lng":116.592014,"lat":35.381134,"count":756},
{"lng":116.587711,"lat":35.375175,"count":977},
{"lng":116.586911,"lat":35.375475,"count":1875},
{"lng":116.624011,"lat":35.356075,"count":143},
{"lng":116.627711,"lat":35.350675,"count":46},
{"lng":116.627311,"lat":35.341875,"count":408},
{"lng":116.622711,"lat":35.344175,"count":730},
{"lng":116.619111,"lat":35.355075,"count":1260},
{"lng":116.591511,"lat":35.339175,"count":50},
{"lng":116.611311,"lat":35.353075,"count":151},
{"lng":116.579711,"lat":35.304575,"count":1363},
{"lng":116.613611,"lat":35.390675,"count":96},
{"lng":116.628311,"lat":35.386775,"count":784},
{"lng":116.580411,"lat":35.364975,"count":9372},
{"lng":116.587111,"lat":35.342775,"count":8268}
 
 
];//这里面添加经纬度
 
 
    if(!isSupportCanvas()){
        alert('热力图目前只支持有canvas支持的浏览器,您所使用的浏览器不能使用热力图功能~')
    }
    //详细的参数,可以查看heatmap.js的文档 https://github.com/pa7/heatmap.js/blob/master/README.md
    //参数说明如下:
    /* visible 热力图是否显示,默认为true
     * opacity 热力的透明度,1-100
     * radius 势力图的每个点的半径大小
     * gradient  {JSON} 热力图的渐变区间 . gradient如下所示
     *  {
            .2:'rgb(0, 255, 255)',
            .5:'rgb(0, 110, 255)',
            .8:'rgb(100, 0, 255)'
        }
        其中 key 表示插值的位置, 0~1.
            value 为颜色值.
     */
    heatmapOverlay = new BMapLib.HeatmapOverlay({"radius":50,"visible":true});
    map.addOverlay(heatmapOverlay);
    heatmapOverlay.setDataSet({data:points,max:4666});
	
    //closeHeatmap();
	
	
 
    //判断浏览区是否支持canvas
    function isSupportCanvas(){
        var elem = document.createElement('canvas');
        return !!(elem.getContext && elem.getContext('2d'));
    }
 
    function setGradient(){
        /*格式如下所示:
        {
            0:'rgb(102, 255, 0)',
            .5:'rgb(255, 170, 0)',
            1:'rgb(255, 0, 0)'
        }*/
        var gradient = {};
        var colors = document.querySelectorAll("input[type='color']");
        colors = [].slice.call(colors,0);
        colors.forEach(function(ele){
            gradient[ele.getAttribute("data-key")] = ele.value;
        });
        heatmapOverlay.setOptions({"gradient":gradient});
    }
 
    function openHeatmap(){
        heatmapOverlay.show();
    }
 
    function closeHeatmap(){
        heatmapOverlay.hide();
    }
</script>
</body>
</html>
